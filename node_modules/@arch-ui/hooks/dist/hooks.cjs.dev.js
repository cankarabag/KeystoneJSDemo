'use strict';

Object.defineProperty(exports, '__esModule', { value: true });

function _interopDefault (ex) { return (ex && (typeof ex === 'object') && 'default' in ex) ? ex['default'] : ex; }

var ResizeObserver = _interopDefault(require('resize-observer-polyfill'));
var react = require('react');

function useMeasure(ref) {
  let [snapshot, setSnapshot] = react.useState(() => ({
    height: 0,
    width: 0
  }));
  react.useLayoutEffect(() => {
    let element = ref.current;

    if (element !== null) {
      let resizeObserver = new ResizeObserver((_ref) => {
        let [entry] = _ref;
        const height = entry.target.offsetHeight;
        const width = entry.target.offsetWidth;

        if (width !== snapshot.width || height !== snapshot.height) {
          setSnapshot({
            width,
            height
          });
        }
      });
      resizeObserver.observe(element);
      return () => {
        resizeObserver.unobserve(element);
      };
    }
  });
  return snapshot;
}

exports.useMeasure = useMeasure;
