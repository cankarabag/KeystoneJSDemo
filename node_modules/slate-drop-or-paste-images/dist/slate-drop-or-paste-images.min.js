!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("slate-react")):"function"==typeof define&&define.amd?define(["exports","slate-react"],e):e(t.SlateDropOrPasteImages={},t.SlateReact)}(this,function(t,e){"use strict";var r="undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{};function n(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}var i=n,u=o;function a(t){if(i===setTimeout)return setTimeout(t,0);if((i===n||!i)&&setTimeout)return i=setTimeout,setTimeout(t,0);try{return i(t,0)}catch(e){try{return i.call(null,t,0)}catch(e){return i.call(this,t,0)}}}"function"==typeof r.setTimeout&&(i=setTimeout),"function"==typeof r.clearTimeout&&(u=clearTimeout);var s,c=[],f=!1,l=-1;function h(){f&&s&&(f=!1,s.length?c=s.concat(c):l=-1,c.length&&p())}function p(){if(!f){var t=a(h);f=!0;for(var e=c.length;e;){for(s=c,c=[];++l<e;)s&&s[l].run();l=-1,e=c.length}s=null,f=!1,function(t){if(u===clearTimeout)return clearTimeout(t);if((u===o||!u)&&clearTimeout)return u=clearTimeout,clearTimeout(t);try{u(t)}catch(e){try{return u.call(null,t)}catch(e){return u.call(this,t)}}}(t)}}function v(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];c.push(new d(t,e)),1!==c.length||f||a(p)}function d(t,e){this.fun=t,this.array=e}d.prototype.run=function(){this.fun.apply(null,this.array)};function m(){}var w=m,g=m,y=m,b=m,_=m,T=m,x=m;var A=r.performance||{},j=A.now||A.mozNow||A.msNow||A.oNow||A.webkitNow||function(){return(new Date).getTime()};var E=new Date;var S={nextTick:v,title:"browser",browser:!0,env:{},argv:[],version:"",versions:{},on:w,addListener:g,once:y,off:b,removeListener:_,removeAllListeners:T,emit:x,binding:function(t){throw new Error("process.binding is not supported")},cwd:function(){return"/"},chdir:function(t){throw new Error("process.chdir is not supported")},umask:function(){return 0},hrtime:function(t){var e=.001*j.call(A),r=Math.floor(e),n=Math.floor(e%1*1e9);return t&&(r-=t[0],(n-=t[1])<0&&(r--,n+=1e9)),[r,n]},platform:"browser",release:{},config:{},uptime:function(){return(new Date-E)/1e3}},C="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};var M,O=(function(t,e){t.exports=function(){function t(t){return"function"==typeof t}var e=Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)},r=0,n=void 0,o=void 0,i=function(t,e){h[r]=t,h[r+1]=e,2===(r+=2)&&(o?o(p):y())},u="undefined"!=typeof window?window:void 0,a=u||{},s=a.MutationObserver||a.WebKitMutationObserver,c="undefined"==typeof self&&void 0!==S&&"[object process]"==={}.toString.call(S),f="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel;function l(){var t=setTimeout;return function(){return t(p,1)}}var h=new Array(1e3);function p(){for(var t=0;t<r;t+=2){var e=h[t],n=h[t+1];e(n),h[t]=void 0,h[t+1]=void 0}r=0}var d,m,w,g,y=void 0;function b(t,e){var r=this,n=new this.constructor(x);void 0===n[T]&&U(n);var o=r._state;if(o){var u=arguments[o-1];i(function(){return F(o,n,u,r._result)})}else I(r,n,t,e);return n}function _(t){if(t&&"object"==typeof t&&t.constructor===this)return t;var e=new this(x);return D(e,t),e}c?y=function(){return v(p)}:s?(m=0,w=new s(p),g=document.createTextNode(""),w.observe(g,{characterData:!0}),y=function(){g.data=m=++m%2}):f?((d=new MessageChannel).port1.onmessage=p,y=function(){return d.port2.postMessage(0)}):y=void 0===u?function(){try{var t=Function("return this")().require("vertx");return void 0!==(n=t.runOnLoop||t.runOnContext)?function(){n(p)}:l()}catch(t){return l()}}():l();var T=Math.random().toString(36).substring(2);function x(){}var A=void 0,j=1,E=2,M={error:null};function O(t){try{return t.then}catch(t){return M.error=t,M}}function P(e,r,n){r.constructor===e.constructor&&n===b&&r.constructor.resolve===_?function(t,e){e._state===j?N(t,e._result):e._state===E?k(t,e._result):I(e,void 0,function(e){return D(t,e)},function(e){return k(t,e)})}(e,r):n===M?(k(e,M.error),M.error=null):void 0===n?N(e,r):t(n)?function(t,e,r){i(function(t){var n=!1,o=function(t,e,r,n){try{t.call(e,r,n)}catch(t){return t}}(r,e,function(r){n||(n=!0,e!==r?D(t,r):N(t,r))},function(e){n||(n=!0,k(t,e))},t._label);!n&&o&&(n=!0,k(t,o))},t)}(e,r,n):N(e,r)}function D(t,e){var r,n;t===e?k(t,new TypeError("You cannot resolve a promise with itself")):(n=typeof(r=e),null===r||"object"!==n&&"function"!==n?N(t,e):P(t,e,O(e)))}function L(t){t._onerror&&t._onerror(t._result),z(t)}function N(t,e){t._state===A&&(t._result=e,t._state=j,0!==t._subscribers.length&&i(z,t))}function k(t,e){t._state===A&&(t._state=E,t._result=e,i(L,t))}function I(t,e,r,n){var o=t._subscribers,u=o.length;t._onerror=null,o[u]=e,o[u+j]=r,o[u+E]=n,0===u&&t._state&&i(z,t)}function z(t){var e=t._subscribers,r=t._state;if(0!==e.length){for(var n=void 0,o=void 0,i=t._result,u=0;u<e.length;u+=3)n=e[u],o=e[u+r],n?F(r,n,o,i):o(i);t._subscribers.length=0}}function F(e,r,n,o){var i=t(n),u=void 0,a=void 0,s=void 0,c=void 0;if(i){if((u=function(t,e){try{return t(e)}catch(t){return M.error=t,M}}(n,o))===M?(c=!0,a=u.error,u.error=null):s=!0,r===u)return void k(r,new TypeError("A promises callback cannot return that same promise."))}else u=o,s=!0;r._state!==A||(i&&s?D(r,u):c?k(r,a):e===j?N(r,u):e===E&&k(r,u))}var R=0;function U(t){t[T]=R++,t._state=void 0,t._result=void 0,t._subscribers=[]}var Y=function(){function t(t,r){this._instanceConstructor=t,this.promise=new t(x),this.promise[T]||U(this.promise),e(r)?(this.length=r.length,this._remaining=r.length,this._result=new Array(this.length),0===this.length?N(this.promise,this._result):(this.length=this.length||0,this._enumerate(r),0===this._remaining&&N(this.promise,this._result))):k(this.promise,new Error("Array Methods must be provided an Array"))}return t.prototype._enumerate=function(t){for(var e=0;this._state===A&&e<t.length;e++)this._eachEntry(t[e],e)},t.prototype._eachEntry=function(t,e){var r=this._instanceConstructor,n=r.resolve;if(n===_){var o=O(t);if(o===b&&t._state!==A)this._settledAt(t._state,e,t._result);else if("function"!=typeof o)this._remaining--,this._result[e]=t;else if(r===q){var i=new r(x);P(i,t,o),this._willSettleAt(i,e)}else this._willSettleAt(new r(function(e){return e(t)}),e)}else this._willSettleAt(n(t),e)},t.prototype._settledAt=function(t,e,r){var n=this.promise;n._state===A&&(this._remaining--,t===E?k(n,r):this._result[e]=r),0===this._remaining&&N(n,this._result)},t.prototype._willSettleAt=function(t,e){var r=this;I(t,void 0,function(t){return r._settledAt(j,e,t)},function(t){return r._settledAt(E,e,t)})},t}(),q=function(){function t(e){this[T]=R++,this._result=this._state=void 0,this._subscribers=[],x!==e&&("function"!=typeof e&&function(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof t?function(t,e){try{e(function(e){D(t,e)},function(e){k(t,e)})}catch(e){k(t,e)}}(this,e):function(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}())}return t.prototype.catch=function(t){return this.then(null,t)},t.prototype.finally=function(t){var e=this.constructor;return this.then(function(r){return e.resolve(t()).then(function(){return r})},function(r){return e.resolve(t()).then(function(){throw r})})},t}();return q.prototype.then=b,q.all=function(t){return new Y(this,t).promise},q.race=function(t){var r=this;return e(t)?new r(function(e,n){for(var o=t.length,i=0;i<o;i++)r.resolve(t[i]).then(e,n)}):new r(function(t,e){return e(new TypeError("You must pass an array to race."))})},q.resolve=_,q.reject=function(t){var e=new this(x);return k(e,t),e},q._setScheduler=function(t){o=t},q._setAsap=function(t){i=t},q._asap=i,q.polyfill=function(){var t=void 0;if(void 0!==C)t=C;else if("undefined"!=typeof self)t=self;else try{t=Function("return this")()}catch(t){throw new Error("polyfill failed because global object is unavailable in this environment")}var e=t.Promise;if(e){var r=null;try{r=Object.prototype.toString.call(e.resolve())}catch(t){}if("[object Promise]"===r&&!e.cast)return}t.Promise=q},q.Promise=q,q}()}(M={exports:{}},M.exports),M.exports);function P(t,e){for(var r=0,n=t.length-1;n>=0;n--){var o=t[n];"."===o?t.splice(n,1):".."===o?(t.splice(n,1),r++):r&&(t.splice(n,1),r--)}if(e)for(;r--;r)t.unshift("..");return t}var D=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,L=function(t){return D.exec(t).slice(1)};function N(){for(var t="",e=!1,r=arguments.length-1;r>=-1&&!e;r--){var n=r>=0?arguments[r]:"/";if("string"!=typeof n)throw new TypeError("Arguments to path.resolve must be strings");n&&(t=n+"/"+t,e="/"===n.charAt(0))}return t=P(B(t.split("/"),function(t){return!!t}),!e).join("/"),(e?"/":"")+t||"."}function k(t){var e=I(t),r="/"===W(t,-1);return(t=P(B(t.split("/"),function(t){return!!t}),!e).join("/"))||e||(t="."),t&&r&&(t+="/"),(e?"/":"")+t}function I(t){return"/"===t.charAt(0)}function z(){return k(B(Array.prototype.slice.call(arguments,0),function(t,e){if("string"!=typeof t)throw new TypeError("Arguments to path.join must be strings");return t}).join("/"))}function F(t,e){function r(t){for(var e=0;e<t.length&&""===t[e];e++);for(var r=t.length-1;r>=0&&""===t[r];r--);return e>r?[]:t.slice(e,r-e+1)}t=N(t).substr(1),e=N(e).substr(1);for(var n=r(t.split("/")),o=r(e.split("/")),i=Math.min(n.length,o.length),u=i,a=0;a<i;a++)if(n[a]!==o[a]){u=a;break}var s=[];for(a=u;a<n.length;a++)s.push("..");return(s=s.concat(o.slice(u))).join("/")}function R(t){var e=L(t),r=e[0],n=e[1];return r||n?(n&&(n=n.substr(0,n.length-1)),r+n):"."}function U(t,e){var r=L(t)[2];return e&&r.substr(-1*e.length)===e&&(r=r.substr(0,r.length-e.length)),r}function Y(t){return L(t)[3]}var q={extname:Y,basename:U,dirname:R,sep:"/",delimiter:":",relative:F,join:z,isAbsolute:I,normalize:k,resolve:N};function B(t,e){if(t.filter)return t.filter(e);for(var r=[],n=0;n<t.length;n++)e(t[n],n,t)&&r.push(t[n]);return r}var W="b"==="ab".substr(-1)?function(t,e,r){return t.substr(e,r)}:function(t,e,r){return e<0&&(e=t.length+e),t.substr(e,r)},$=Object.freeze({resolve:N,normalize:k,isAbsolute:I,join:z,relative:F,sep:"/",delimiter:":",dirname:R,basename:U,extname:Y,default:q}),K=["ase","art","bmp","blp","cd5","cit","cpt","cr2","cut","dds","dib","djvu","egt","exif","gif","gpl","grf","icns","ico","iff","jng","jpeg","jpg","jfif","jp2","jps","lbm","max","miff","mng","msp","nitf","ota","pbm","pc1","pc2","pc3","pcf","pcx","pdn","pgm","PI1","PI2","PI3","pict","pct","pnm","pns","ppm","psb","psd","pdd","psp","px","pxm","pxr","qfx","raw","rle","sct","sgi","rgb","int","bw","tga","tiff","tif","vtf","xbm","xcf","xpm","3dv","amf","ai","awg","cgm","cdr","cmx","dxf","e2d","egt","eps","fs","gbr","odg","svg","stl","vrml","x3d","sxd","v2d","vnd","wmf","emf","art","xar","png","webp","jxr","hdp","wdp","cur","ecw","iff","lbm","liff","nrrd","pam","pcx","pgf","sgi","rgb","rgba","bw","int","inta","sid","ras","sun","tga"],G=Object.freeze({default:K}),H=$&&q||$,J=G&&K||G,Q=Object.create(null);J.forEach(function(t){Q[t]=!0});var V=function(t){return H.extname(t).slice(1).toLowerCase()in Q},X=function(t){return Z.test(t)},Z=/^(?:\w+:)?\/\/([^\s\.]+\.\S{2}|localhost[\:?\d]*)\S*$/;var tt=void 0!==r?r:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{};function et(){throw new Error("setTimeout has not been defined")}function rt(){throw new Error("clearTimeout has not been defined")}var nt=et,ot=rt;function it(t){if(nt===setTimeout)return setTimeout(t,0);if((nt===et||!nt)&&setTimeout)return nt=setTimeout,setTimeout(t,0);try{return nt(t,0)}catch(e){try{return nt.call(null,t,0)}catch(e){return nt.call(this,t,0)}}}"function"==typeof tt.setTimeout&&(nt=setTimeout),"function"==typeof tt.clearTimeout&&(ot=clearTimeout);var ut,at=[],st=!1,ct=-1;function ft(){st&&ut&&(st=!1,ut.length?at=ut.concat(at):ct=-1,at.length&&lt())}function lt(){if(!st){var t=it(ft);st=!0;for(var e=at.length;e;){for(ut=at,at=[];++ct<e;)ut&&ut[ct].run();ct=-1,e=at.length}ut=null,st=!1,function(t){if(ot===clearTimeout)return clearTimeout(t);if((ot===rt||!ot)&&clearTimeout)return ot=clearTimeout,clearTimeout(t);try{ot(t)}catch(e){try{return ot.call(null,t)}catch(e){return ot.call(this,t)}}}(t)}}function ht(t,e){this.fun=t,this.array=e}ht.prototype.run=function(){this.fun.apply(null,this.array)};function pt(){}var vt=pt,dt=pt,mt=pt,wt=pt,gt=pt,yt=pt,bt=pt;var _t=tt.performance||{},Tt=_t.now||_t.mozNow||_t.msNow||_t.oNow||_t.webkitNow||function(){return(new Date).getTime()};var xt=new Date;var At={nextTick:function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];at.push(new ht(t,e)),1!==at.length||st||it(lt)},title:"browser",browser:!0,env:{},argv:[],version:"",versions:{},on:vt,addListener:dt,once:mt,off:wt,removeListener:gt,removeAllListeners:yt,emit:bt,binding:function(t){throw new Error("process.binding is not supported")},cwd:function(){return"/"},chdir:function(t){throw new Error("process.chdir is not supported")},umask:function(){return 0},hrtime:function(t){var e=.001*Tt.call(_t),r=Math.floor(e),n=Math.floor(e%1*1e9);return t&&(r-=t[0],(n-=t[1])<0&&(r--,n+=1e9)),[r,n]},platform:"browser",release:{},config:{},uptime:function(){return(new Date-xt)/1e3}},jt=void 0!==At&&At.env&&!0,Et="undefined"!=typeof console&&"function"==typeof console.log&&"function"==typeof console.warn&&"function"==typeof console.error;function St(t,e){if(jt&&Et){for(var r,n=arguments.length,o=Array(n>2?n-2:0),i=2;i<n;i++)o[i-2]=arguments[i];(r=console)[t].apply(r,[e].concat(o))}}var Ct={deprecate:function(t,e){for(var r=arguments.length,n=Array(r>2?r-2:0),o=2;o<r;o++)n[o-2]=arguments[o];St.apply(void 0,["warn","Deprecation ("+t+"): "+e].concat(n))},error:function(t){if(Et){for(var e,r=arguments.length,n=Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=arguments[o];(e=console).error.apply(e,[t].concat(n))}},warn:function(t){for(var e=arguments.length,r=Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];St.apply(void 0,["warn","Warning: "+t].concat(r))}};function Mt(t){for(var e=t.split(",")[1],r=atob(e),n=new window.ArrayBuffer(r.length),o=new window.Uint8Array(n),i=0;i<r.length;i++)o[i]=r.charCodeAt(i);100!=new Blob([new window.Uint8Array(100)]).size&&(o=n);var u=new Blob([o],{type:function(t){return t.split("")[0].slice(5)}(t)});return u.slice=u.slice||u.webkitSlice,u}var Ot=function(t){return!0===(t&&new RegExp(/^(data:)([\w\/\+]+);(charset=[\w-]+|base64).*,(.*)/gi).test(t))};function Pt(t,e){if(Ot(t)){var r=Mt(t);setTimeout(function(){e(null,r)})}else!function(t,e){var r=window.document.createElement("canvas"),n=window.document.createElement("img");if(!r.getContext)return setTimeout(e,0,new Error("Canvas is not supported."));n.onload=function(){var t=r.getContext("2d");r.width=n.width,r.height=n.height,t.drawImage(n,0,0);var o=r.toDataURL("image/png");e(null,o)},n.ononerror=function(){e(new Error("Failed to load image."))},n.setAttribute("crossOrigin","anonymous"),n.src=t}(t,function(t,r){var n=Mt(r);e(t,n)})}var Dt=function(){return function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var r=[],n=!0,o=!1,i=void 0;try{for(var u,a=t[Symbol.iterator]();!(n=(u=a.next()).done)&&(r.push(u.value),!e||r.length!==e);n=!0);}catch(t){o=!0,i=t}finally{try{!n&&a.return&&a.return()}finally{if(o)throw i}}return r}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();t.default=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.insertImage,n=t.extensions;if(t.applyTransform&&(Ct.deprecate("0.6.0","The `applyTransform` argument to `slate-drop-or-paste-images` has been renamed to `insertImage` instead."),r=t.applyTransform),!r)throw new Error("You must supply an `insertImage` function.");function o(t){var e=!1,r=!0,o=!1,i=void 0;try{for(var u,a=n[Symbol.iterator]();!(r=(u=a.next()).done);r=!0){var s=u.value;t.includes(s)&&(e=!0)}}catch(t){o=!0,i=t}finally{try{!r&&a.return&&a.return()}finally{if(o)throw i}}return e}function i(t,e){var n=t.editor;return O.resolve(r(t,e)).then(function(){n.onChange(t)})}function u(t,r,u){var a=r.editor,s=e.getEventTransfer(t),c=e.getEventRange(t,a);switch(s.type){case"files":return function(t,e,r,u,a){var s=u.files,c=!0,f=!1,l=void 0;try{for(var h,p=s[Symbol.iterator]();!(c=(h=p.next()).done);c=!0){var v=h.value;if(n){var d=v.type,m=d.split("/"),w=Dt(m,2),g=w[1];if(!o(g))continue}a&&e.select(a),i(e,v)}}catch(t){f=!0,l=t}finally{try{!c&&p.return&&p.return()}finally{if(f)throw l}}}(0,r,0,s,c);case"html":return function(t,e,r,u,a){var s=e.editor,c=u.html,f=(new DOMParser).parseFromString(c,"text/html").body.firstChild;if("img"!=f.nodeName.toLowerCase())return r();var l=f.src;if(n){var h=Y(l).slice(1);if(!o(h))return r()}Pt(l,function(t,e){t||s.change(function(t){a&&t.select(a),i(t,e)})})}(0,r,u,s,c);case"text":return function(t,e,r,n,o){var u=e.editor,a=n.text;return X(a)&&V(a)?void Pt(a,function(t,e){t||u.change(function(t){o&&t.select(o),i(t,u)})}):r()}(0,r,u,s,c);default:return u()}}return{onDrop:u,onPaste:u}},Object.defineProperty(t,"__esModule",{value:!0})});
